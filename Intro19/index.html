<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Otros paquetes y funciones útiles</title>
    <meta charset="utf-8" />
    <meta name="author" content="Instituto Nacional de Epidemiología" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <script src="libs/jquery/jquery-3.6.0.min.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="animate.min.css" type="text/css" />
    <link rel="stylesheet" href="fonts_mtheme.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Otros paquetes y funciones útiles
]
.author[
### Instituto Nacional de Epidemiología
]

---


layout: true
class: animated, fadeIn






---
## Exploración de datos

.font140[
La exploración de datos se puede incluir dentro del **análisis exploratorio de datos** y persigue un primer grupo de objetivos:

- Conocer la estructura de la tabla de datos y sus tipos de variables
- Detectar observaciones incompletas (valores faltantes)
- Detectar datos con errores e inconsistencias 

Habitualmente hablamos de **_calidad de los datos_** en relación a los items anteriores.

Una segunda etapa nos va servir para conocer la distribución de las variables de interés a partir de: 

- Resumir datos mediante estadísticos y gráficos
- Detectar valores atípicos (outlier)
]
---
## Diagnóstico de datos

.font140[

La etapa diagnóstica comprende:

- el conocimiento de la estructura de la tabla de datos
- la verificación del tipo de dato de cada variable de interés
- la detección de los valores faltantes en las observaciones
- las categorías de las variables cualitativas
- los mínimos y máximos de valores de cada variable cuantitativa

Hay múltiples funciones que se pueden utilizar para cubrir esta etapa y también existen paquetes especiales que se crearon para este fin.

Este diagnóstico es el punto de partida de la depuración de datos, previa a cualquier análisis.

]
---
## Paquetes especificos

.font140[
Vamos a trabajar con dos paquetes especiales que nos permiten hacer este trabajo, aunque dentro del universo de librerías de R vamos a encontrar muchos mas. 

**skimr**

Está diseñado para obtener un resumen rápido de la estructura de tablas de datos y es compatible con el ecosistema tidyverse. 


**dlookr**

Se define como una colección de herramientas que permiten el diagnóstico, la exploración y la transformación de datos. El diagnóstico de datos proporciona información y visualización de valores faltantes, valores atípicos y valores únicos y negativos para ayudarle a comprender la distribución y la calidad de sus datos.

]
---
## skimr

.font140[
La función principal del paquete es `skim` y puede ser aplicada a todo el dataframe o bien a una variable o a un grupo de ellas.
]


Table: Data summary

|                         |     |
|:------------------------|:----|
|Name                     |rita |
|Number of rows           |1067 |
|Number of columns        |70   |
|_______________________  |     |
|Column type frequency:   |     |
|character                |50   |
|logical                  |2    |
|numeric                  |18   |
|________________________ |     |
|Group variables          |None |


**Variable type: character**

|skim_variable | n_missing| complete_rate| min| max| empty| n_unique| whitespace|
|:-------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|
|FMODPA        |       994|          0.07|  18|  19|     0|       68|          0|
|IDESTN        |         0|          1.00|  18|  81|     0|       55|          0|
|PTESXN        |         0|          1.00|   5|   6|     0|        2|          0|
|FENAC         |         0|          1.00|  10|  10|     0|      963|          0|
|CONALF        |         0|          1.00|   2|   9|     0|        4|          0|
|PTEDU         |        11|          0.99|   3|  31|     0|       13|          0|
|OSDESC        |         0|          1.00|   2|   9|     0|        4|          0|
|OSSIGLA       |         0|          1.00|   3|  12|     0|       57|          0|
|OSPTE         |         0|          1.00|   3| 164|     0|       69|          0|
|PAMIDESC      |         0|          1.00|   2|   9|     0|        4|          0|
|PRDESC        |         0|          1.00|   2|   9|     0|        4|          0|
|COPRI         |      1044|          0.02|   4|  35|     0|       19|          0|
|STPAC         |         0|          1.00|   8|  10|     0|        2|          0|
|PORIG         |         0|          1.00|  11|  29|     0|        2|          0|
|FEREG         |         0|          1.00|  10|  10|     0|      846|          0|
|FMODTU        |       964|          0.10|  18|  19|     0|      103|          0|
|FEINI         |         0|          1.00|   3|  10|     0|      315|          0|
|FECON         |         0|          1.00|   3|  10|     0|      649|          0|
|FEDG          |         0|          1.00|   3|  10|     0|      875|          0|
|TPGF          |        14|          0.99|   5|   5|     0|      128|          0|
|TPGFN         |         0|          1.00|   3| 135|     0|      180|          0|
|MFGN          |         0|          1.00|   3| 123|     0|      201|          0|
|COMPN         |         0|          1.00|   7|  23|     0|        5|          0|
|DIFHIN        |         0|          1.00|   8|  26|     0|       10|          0|
|METDGN        |         0|          1.00|   3|  59|     0|       12|          0|
|PRIMA         |         0|          1.00|   2|   9|     0|        4|          0|
|OTRTU         |        13|          0.99|   2|   9|     0|        4|          0|
|ESTCT         |         0|          1.00|   1|   3|     0|       11|          0|
|ESTCN         |         0|          1.00|   1|   3|     0|        9|          0|
|ESTCM         |         0|          1.00|   1|   3|     0|        5|          0|
|TNMCL         |         0|          1.00|   1|   7|     0|       33|          0|
|TULAT         |         0|          1.00|   2|  15|     0|        7|          0|
|ESTPT         |         0|          1.00|   1|   3|     0|       11|          0|
|ESTPN         |         0|          1.00|   1|   3|     0|        9|          0|
|ESTPM         |         0|          1.00|   1|   3|     0|        5|          0|
|PTNM          |         0|          1.00|   1|   6|     0|       25|          0|
|ECOG          |         0|          1.00|   3|  70|     0|        7|          0|
|CATPO         |         0|          1.00|   3| 205|     0|        8|          0|
|FEREGTTO      |       468|          0.56|  10|  10|     0|      522|          0|
|FMODTR        |      1021|          0.04|  18|  19|     0|       46|          0|
|FITTO         |       468|          0.56|  10|  10|     0|      531|          0|
|INTTON        |       468|          0.56|   3|  22|     0|        8|          0|
|ESTTON        |       468|          0.56|   3|  40|     0|       11|          0|
|FINTO         |       468|          0.56|   3|  10|     0|      387|          0|
|CUTTON        |       468|          0.56|   2|   9|     0|        4|          0|
|RTATON        |       468|          0.56|   3|  41|     0|        9|          0|
|FEULT         |       379|          0.64|   3|  10|     0|      570|          0|
|ESULTN        |       379|          0.64|   5|  50|     0|        9|          0|
|FEDEF         |       779|          0.27|  10|  10|     0|      254|          0|
|FMODSP        |       947|          0.11|  18|  19|     0|      111|          0|


**Variable type: logical**

|skim_variable | n_missing| complete_rate| mean|count |
|:-------------|---------:|-------------:|----:|:-----|
|IDPAMI        |      1067|             0|  NaN|:     |
|IDPREPAGA     |      1067|             0|  NaN|:     |


**Variable type: numeric**

|skim_variable | n_missing| complete_rate|          mean|           sd|   p0|     p25|   p50|      p75|         p100|hist  |
|:-------------|---------:|-------------:|-------------:|------------:|----:|-------:|-----:|--------:|------------:|:-----|
|IDPTE         |         0|          1.00|  6.068113e+04| 3.400682e+04| 1308| 31738.0| 60709|  92263.5| 1.185950e+05|▇▇▇▆▇ |
|IDEST         |         0|          1.00|  6.025000e+01| 9.609000e+01|    2|    14.0|    24|     47.0| 3.540000e+02|▇▁▁▁▁ |
|PTESX         |         0|          1.00|  1.610000e+00| 4.900000e-01|    1|     1.0|     2|      2.0| 2.000000e+00|▅▁▁▁▇ |
|NPAMI         |         0|          1.00|  1.811600e+12| 9.241792e+12|    0|     0.0|     0|      0.0| 1.504915e+14|▇▁▁▁▁ |
|ORIGN         |         0|          1.00|  9.980700e+02| 3.031000e+01|    9|   999.0|   999|    999.0| 9.990000e+02|▁▁▁▁▇ |
|IDTUM         |         0|          1.00|  5.879254e+04| 3.363219e+04|  459| 29894.5| 58647|  89735.0| 1.161800e+05|▇▇▇▇▇ |
|DGED          |         0|          1.00|  5.515000e+01| 1.801000e+01|    0|    44.0|    58|     67.0| 1.180000e+02|▁▃▇▂▁ |
|MFG           |        28|          0.97|  8.352190e+03| 4.606600e+02| 8000|  8070.0|  8140|   8500.0| 9.989000e+03|▇▂▁▁▁ |
|COMP          |         0|          1.00| -1.591000e+01| 1.829200e+02| -999|     3.0|     3|      3.0| 9.990000e+02|▁▁▇▁▁ |
|DIFHI         |         0|          1.00|  1.031700e+02| 5.696700e+02| -999|     2.0|     2|      9.0| 9.990000e+02|▂▁▇▁▂ |
|METDG         |         0|          1.00| -2.240000e+01| 1.874400e+02| -999|     8.0|     8|      8.0| 9.990000e+02|▁▁▇▁▁ |
|PRINU         |         0|          1.00|  5.000000e-02| 3.300000e-01|    0|     0.0|     0|      0.0| 3.000000e+00|▇▁▁▁▁ |
|IDTTO         |       468|          0.56|  9.411933e+04| 4.928666e+04|  796| 53605.5| 97251| 141316.0| 1.695510e+05|▃▅▆▅▇ |
|INTTO         |       468|          0.56| -5.827000e+01| 3.465600e+02| -999|     1.0|     1|      3.0| 9.990000e+02|▁▁▇▁▁ |
|ESTTO         |       468|          0.56| -4.390000e+00| 1.155000e+02| -999|     1.0|     2|      3.0| 9.990000e+02|▁▁▇▁▁ |
|CUTTO         |       468|          0.56| -1.860400e+02| 5.023800e+02| -999|     1.0|     1|      1.0| 9.990000e+02|▂▁▇▁▁ |
|RTATO         |       468|          0.56| -1.832300e+02| 6.598000e+02| -999|  -999.0|     2|      6.0| 9.990000e+02|▅▁▇▁▂ |
|ESULT         |       379|          0.64|  3.570000e+00| 1.670000e+00|    1|     2.0|     4|      4.0| 1.000000e+01|▆▇▃▁▁ |

---
## dlookr

.font140[
El paquete dlookr contiene funciones que nos facilitan el diagnóstico de nuestros datos, además de otras que tienen por objetivo la exploración y transformación de ellos. 

Entre estas funciones encontramos:

`diagnose()` que proporciona información básica de las variables

`diagnose_category()` nos devuelve información detallada de las variables categóricas

`diagnose_numeric()` nos devuelve información detallada de las variables numéricas.

`diagnose_outlier()` y `plot_outlier()` proporciona información y visualización de valores atípicos.

`plot_na_pareto()` construye un diagrama de Pareto mostrando las variables con datos faltantes.

]

---
## diagnose()

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e3dc7fb8007e43c0f478" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e3dc7fb8007e43c0f478">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70"],["IDPTE","FMODPA","IDEST","IDESTN","PTESX","PTESXN","FENAC","CONALF","PTEDU","OSDESC","OSSIGLA","OSPTE","PAMIDESC","IDPAMI","NPAMI","PRDESC","IDPREPAGA","COPRI","STPAC","PORIG","ORIGN","IDTUM","FEREG","FMODTU","FEINI","FECON","FEDG","DGED","TPGF","TPGFN","MFG","MFGN","COMP","COMPN","DIFHI","DIFHIN","METDG","METDGN","PRIMA","PRINU","OTRTU","ESTCT","ESTCN","ESTCM","TNMCL","TULAT","ESTPT","ESTPN","ESTPM","PTNM","ECOG","CATPO","IDTTO","FEREGTTO","FMODTR","FITTO","INTTO","INTTON","ESTTO","ESTTON","FINTO","CUTTO","CUTTON","RTATO","RTATON","FEULT","ESULT","ESULTN","FEDEF","FMODSP"],["numeric","character","numeric","character","numeric","character","character","character","character","character","character","character","character","logical","numeric","character","logical","character","character","character","numeric","numeric","character","character","character","character","character","numeric","character","character","numeric","character","numeric","character","numeric","character","numeric","character","character","numeric","character","character","character","character","character","character","character","character","character","character","character","character","numeric","character","character","character","numeric","character","numeric","character","character","numeric","character","numeric","character","character","numeric","character","character","character"],[0,994,0,0,0,0,0,0,11,0,0,0,0,1067,0,0,1067,1044,0,0,0,0,0,964,0,0,0,0,14,0,28,0,0,0,0,0,0,0,0,0,13,0,0,0,0,0,0,0,0,0,0,0,468,468,1021,468,468,468,468,468,468,468,468,468,468,379,379,379,779,947],[0,93.16,0,0,0,0,0,0,1.03,0,0,0,0,100,0,0,100,97.84,0,0,0,0,0,90.34999999999999,0,0,0,0,1.31,0,2.62,0,0,0,0,0,0,0,0,0,1.22,0,0,0,0,0,0,0,0,0,0,0,43.86,43.86,95.69,43.86,43.86,43.86,43.86,43.86,43.86,43.86,43.86,43.86,43.86,35.52,35.52,35.52,73.01000000000001,88.75],[998,69,55,55,2,2,963,4,14,4,57,69,4,1,183,4,1,20,2,2,2,1066,846,104,315,649,875,85,129,180,140,201,5,5,10,10,12,12,4,4,5,11,9,5,33,7,11,9,5,25,7,8,599,523,47,532,9,9,12,12,388,5,5,10,10,571,10,10,255,112],[0.9399999999999999,0.06,0.05,0.05,0,0,0.9,0,0.01,0,0.05,0.06,0,0,0.17,0,0,0.02,0,0,0,1,0.79,0.1,0.3,0.61,0.82,0.08,0.12,0.17,0.13,0.19,0,0,0.01,0.01,0.01,0.01,0,0,0,0.01,0.01,0,0.03,0.01,0.01,0.01,0,0.02,0.01,0.01,0.5600000000000001,0.49,0.04,0.5,0.01,0.01,0.01,0.01,0.36,0,0,0.01,0.01,0.54,0.01,0.01,0.24,0.1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>variables<\/th>\n      <th>types<\/th>\n      <th>missing_count<\/th>\n      <th>missing_percent<\/th>\n      <th>unique_count<\/th>\n      <th>unique_rate<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":9,"columnDefs":[{"className":"dt-right","targets":[3,4,5,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[9,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>

---
## diagnose_category()

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-82f333507a2de5c8b171" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-82f333507a2de5c8b171">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"],["IDESTN","IDESTN","IDESTN","IDESTN","IDESTN","IDESTN","IDESTN","IDESTN","IDESTN","IDESTN","TPGFN","TPGFN","TPGFN","TPGFN","TPGFN","TPGFN","TPGFN","TPGFN","TPGFN","TPGFN","MFGN","MFGN","MFGN","MFGN","MFGN","MFGN","MFGN","MFGN","MFGN","MFGN"],["HOSPITAL PROVINCIAL NEUQUEN DR. EDUARDO CASTRO RENDON","Hospital Escuela de Agudos Dr. Ramón Madariaga - Misiones","Hospital Dr. J. B. Iturraspe - Santa Fe","Instituto de Oncología Angel H. Roffo - Buenos Aires","Hospital Nacional Profesor Alejandro Posadas - Buenos Aires","Centro Oncológico de Integración Regional - COIR - Mendoza","Hospital Oncológico de la provincia de Córdoba","Hospital San Martín de Paraná","Hospital San Martin de La Plata","Hospital El Cruce- Florencio Varela - Buenos Aires","(C50.9)-Mama, SAI","(C53.9)-Cuello uterino","(C18.9)-Colon, SAI","(C53.9)-Cérvix, SAI","(C50.4)-Cuadrante superior externo de la mama","(C61.9)-Próstata. SAI","(C34.9)-Pulmón, SAI","(C64.9)-Riñón, SAI","(C42.1)-Médula ósea","(C56.9)-Ovario","(8140)-Adenocarcinoma, SAI","(8010)-Carcinoma, SAI","(8070)-Carcinoma escamoso","(8500)-Carcinoma ductal infiltrante, SAI (C50._)","(8070)-Carcinoma epidermoide, SAI","(8500)-Carcinoma ductal, SAI","(8077)-Neoplasia intraepitelial cervical. grado III (C53.-) NIC III. SAI (C53.-) (CIN III)NIC III con displasia aguda (c53)","N/D","(8090)-Carcinoma de células basales, SAI (C44._)","(8070)-Carcinoma de células escamosas, SAI"],[1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067,1067],[97,79,75,64,63,62,49,49,46,43,137,100,42,38,34,34,32,30,28,25,160,87,87,65,46,43,28,28,24,23],[9.09,7.4,7.03,6,5.9,5.81,4.59,4.59,4.31,4.03,12.84,9.369999999999999,3.94,3.56,3.19,3.19,3,2.81,2.62,2.34,15,8.15,8.15,6.09,4.31,4.03,2.62,2.62,2.25,2.16],[1,2,3,4,5,6,7,7,9,10,1,2,3,4,5,5,7,8,9,10,1,2,2,4,5,6,7,7,9,10]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>variables<\/th>\n      <th>levels<\/th>\n      <th>N<\/th>\n      <th>freq<\/th>\n      <th>ratio<\/th>\n      <th>rank<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":9,"columnDefs":[{"className":"dt-right","targets":[3,4,5,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[9,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
---
## diagnose_numeric()

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-14464b00bd110b62051f" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-14464b00bd110b62051f">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],["IDPTE","IDEST","PTESX","ORIGN","IDTUM","DGED","MFG","COMP","DIFHI","METDG","PRINU","IDTTO","INTTO","ESTTO","CUTTO","RTATO","ESULT"],[1308,2,1,9,459,0,8000,-999,-999,-999,0,796,-999,-999,-999,-999,1],[31738,14,1,999,29894.5,44,8070,3,2,8,0,53605.5,1,1,1,-999,2],[60681.13,60.25,1.61,998.0700000000001,58792.54,55.15,8352.190000000001,-15.91,103.17,-22.4,0.05,94119.33,-58.27,-4.39,-186.04,-183.23,3.57],[60709,24,2,999,58647,58,8140,3,2,8,0,97251,1,2,1,2,4],[92263.5,47,2,999,89735,67,8500,3,9,8,0,141316,3,3,1,6,4],[118595,354,2,999,116180,118,9989,999,999,999,3,169551,999,999,999,999,10],[0,0,0,0,0,22,0,5,0,0,1036,0,0,0,0,0,0],[0,0,0,0,0,0,0,28,125,35,0,0,55,6,142,196,0],[0,131,0,1,0,30,81,111,358,149,31,0,74,21,194,0,24]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>variables<\/th>\n      <th>min<\/th>\n      <th>Q1<\/th>\n      <th>mean<\/th>\n      <th>median<\/th>\n      <th>Q3<\/th>\n      <th>max<\/th>\n      <th>zero<\/th>\n      <th>minus<\/th>\n      <th>outlier<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":9,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8,9,10]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[9,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
---

## diagnose_outlier()

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-4929cc32b3032efac435" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4929cc32b3032efac435">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],["IDPTE","IDEST","PTESX","ORIGN","IDTUM","DGED","MFG","COMP","DIFHI","METDG","PRINU","IDTTO","INTTO","ESTTO","CUTTO","RTATO","ESULT"],[0,131,0,1,0,30,81,111,358,149,31,0,74,21,194,0,24],[0,12.28,0,0.09,0,2.81,7.59,10.4,33.55,13.96,2.91,0,6.94,1.97,18.18,0,2.25],[null,314.11,null,9,null,23.3,9690.35,-178.74,301.37,-209.66,1.87,null,-486,-185.81,-576.52,null,8.789999999999999],[60681.13,60.25,1.61,998.0700000000001,58792.54,55.15,8352.190000000001,-15.91,103.17,-22.4,0.05,94119.33,-58.27,-4.39,-186.04,-183.23,3.57],[60681.13,24.72,1.61,999,58792.54,56.07,8239.040000000001,3,3.09,8,0,94119.33,2.02,2.2,1,-183.23,3.38]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>variables<\/th>\n      <th>outliers_cnt<\/th>\n      <th>outliers_ratio<\/th>\n      <th>outliers_mean<\/th>\n      <th>with_mean<\/th>\n      <th>without_mean<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":9,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[9,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
---
## plot_outlier()
.center[
![](index_files/figure-html/unnamed-chunk-6-1.png)&lt;!-- --&gt;
]
---

## plot_na_pareto()

.center[
![](index_files/figure-html/unnamed-chunk-7-1.png)&lt;!-- --&gt;
] 

---
background-image: url(assets/datacleaning.jpg)
background-size: 380px
background-position: 90% 30%

## Depuración de datos

.font140[ 
La etapa de depuración o limpieza de datos comienza con la exploración inicial y el diagnóstico adecuado de cada variable de interés en nuestra tabla.

Luego continúa con las transformaciones necesarias de los datos de la tabla a partir del diagnóstico realizado.

]




&lt;img src="assets/flujo.png" width="70%" style="display: block; margin: auto;" /&gt;

---
## Operaciones simultáneas por columnas 

.font130[
Las operaciones por columnas se refieren a la aplicación de las mismas funciones-verbos de dplyr (u otras funciones de transformación de datos) a varias columnas simultáneamente.
]

.font120[
Ejemplo, creación de múltiples columnas con **mutate()**
]
&lt;img src="assets/mutate_across.PNG" width="20%" /&gt;
.font120[
Ejemplo, resumiendo múltiples columnas con **summarise()**
]
&lt;img src="assets/summarise_across.PNG" width="20%" /&gt;
---
class: left, top


## across()

.font140[
Esta función es la encargada de dar soporte para las operaciones múltiples (*dplyr &gt;= 1.0.0*)
]

.center[.font160[
across(.blue[ .cols],  .orange[ .fns],  .purple[ ...],  .green[ .names])
]]

.font140[
.blue[.cols] = columnas a transformar

.orange[.fns] = función o funciones para aplicar a cada columna de .cols

.purple[...] = argumentos adicionales de las funciones especificadas anteriormente (ejemplo: na.rm = T)

.green[.names] = nombres de las columnas de salida. Aquí, `{col}` es un marcador especial al que se le puede agregar el sufijo deseado.

]

---
# Ejemplo 

.font140[
Utilizamos `across()` para transformar el tipo de datos de character a Date en las fechas (variables que comienzan con "FE") de la tabla rita en solo paso.

]


```r
rita |&gt; 
  mutate(across(starts_with("FE"),
                dmy)) |&gt; 
  select(where(is.Date))
```

```
## # A tibble: 1,067 × 8
##    FENAC      FEREG      FEINI      FECON      FEDG       FEREGTTO   FEULT     
##    &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    
##  1 1985-05-18 2023-04-12 NA         2022-05-26 2022-05-26 NA         NA        
##  2 1944-10-03 2020-01-29 NA         2019-11-15 2019-12-09 NA         2020-07-16
##  3 1965-07-08 2017-09-17 2015-06-15 2017-03-08 2017-07-06 NA         2019-02-20
##  4 1966-06-11 2018-02-27 2016-06-15 2017-01-16 2017-01-17 NA         2018-07-21
##  5 1980-05-03 2017-06-12 NA         2016-09-07 2016-12-07 NA         2017-02-22
##  6 1935-02-13 2018-06-22 NA         2018-05-14 2018-05-14 NA         NA        
##  7 1958-01-09 2022-08-10 NA         2020-11-09 2020-12-30 NA         2021-03-06
##  8 1962-07-31 2018-04-13 NA         2018-01-24 2018-01-24 NA         NA        
##  9 1938-02-07 2017-03-19 2016-06-30 2016-06-30 2016-10-26 2017-03-19 2018-11-13
## 10 1926-05-31 2019-04-30 NA         NA         2018-11-22 2019-04-30 2022-11-16
## # ℹ 1,057 more rows
## # ℹ 1 more variable: FEDEF &lt;date&gt;
```

---
## Estadistica descriptiva con rstatix

.font140[
El paquete **rstatix** provee un marco simple e intuitivo compatible con el uso de tuberías, coherente con la filosofía de diseño "tidyverse", para realizar pruebas estadísticas descriptivas básicas y otras más avanzadas de inferencia y modelado.

Las funciones relacionadas con la inferencia estadística, como t-test, ANOVAS, correlaciones y tamaños de efecto, así como también valores p ajustados o agregados de etiquetas de significación no serán explicados en este curso pero aquellxs estudiantes que les interese profundizar y utilizarlas le pueden sacar un provecho muy útil a este paquete. 

El sitio web del paquete es [rstatix](https://rpkgs.datanovia.com/rstatix/index.html)

]

---
## Algunas funciones

.font140[
`get_summary_stats()` devuelve un resumen de estadísticas descriptivas univariadas para variables cuantitativas
]

.font130[

```r
library(rstatix)

rita |&gt; 
  get_summary_stats(DGED, type = "common")
```

```
## # A tibble: 1 × 10
##   variable     n   min   max median   iqr  mean    sd    se    ci
##   &lt;fct&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 DGED      1067     0   118     58    23  55.1  18.0 0.551  1.08
```
]
---
## Algunas funciones

.font130[

```r
rita |&gt; 
  get_summary_stats(DGED, type = "robust")
```

```
## # A tibble: 1 × 4
##   variable     n median   iqr
##   &lt;fct&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 DGED      1067     58    23
```

```r
rita |&gt; 
  get_summary_stats(DGED, type = "full")
```

```
## # A tibble: 1 × 13
##   variable     n   min   max median    q1    q3   iqr   mad  mean    sd    se
##   &lt;fct&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 DGED      1067     0   118     58    44    67    23  16.3  55.1  18.0 0.551
## # ℹ 1 more variable: ci &lt;dbl&gt;
```

]
---
## Algunas funciones

.font140[
`freq_table()` devuelve una tabla de frecuencia absoluta y porcentual de variables cualitativas (se puede combinar más de una) 
]


```r
rita |&gt; 
 freq_table(PTEDU)
```

```
## # A tibble: 13 × 3
##    PTEDU                               n  prop
##    &lt;chr&gt;                           &lt;int&gt; &lt;dbl&gt;
##  1 EGB Completo                        1   0.1
##  2 Inicial Completo                    2   0.2
##  3 Inicial Incompleto                  2   0.2
##  4 N/D                               603  57.1
##  5 Primario Completo                 153  14.5
##  6 Primario Incompleto                45   4.3
##  7 Se Ignora                          75   7.1
##  8 Secundario Completo                82   7.8
##  9 Secundario Incompleto              50   4.7
## 10 Terciario o Superior Completo      15   1.4
## 11 Terciario o Superior Incompleto     4   0.4
## 12 Universitario Completo             18   1.7
## 13 Universitario Imcompleto            6   0.6
```


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<style>
.logo {
  background-image: url(logo_INE.PNG);
  background-size: contain;
  background-repeat: no-repeat;
  position: absolute;
  top: 1em;
  right: 1em;
  width: 55px;
  height: 64px;
  z-index: 0;
}
</style>

<script>
document
  .querySelectorAll(
    '.remark-slide-content' +
    ':not(.title-slide)' +
    // add additional classes to exclude here, e.g.
    // ':not(.inverse)' +
    ':not(.hide-logo)'
  )
  .forEach(el => {
    el.innerHTML += '<div class="logo"></div>';
  });
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
