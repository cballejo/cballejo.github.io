---
title: "Introducci√≥n al an√°lisis de datos en R y RStudio"
subtitle: "Encuentro 1"
format: 
  revealjs:
    transition: slide
    slide-number: true
    theme: simple
    footer: "Residencia Medicina General"
editor: visual
---

## Objetivos

::: incremental

- Comprender los conceptos fundamentales sobre estructura y organizaci√≥n de los datos en salud.
- Instalar y configurar el entorno de trabajo con R, RStudio, Rtools y paquetes b√°sicos.
- Explorar caracter√≠sticas relevantes del lenguaje R y tidyverse
:::

## ¬øQu√© es un dato?

-   Unidad m√≠nima de informaci√≥n que describe una caracter√≠stica observable de una unidad de an√°lisis en la muestra o poblaci√≥n.
-   **Ejemplo:** la edad registrada en una historia cl√≠nica.

![](images/dato.JPG){fig-align="center"}

**Idea clave:** un dato s√≥lo tiene significado en su contexto (qui√©n, cu√°ndo, c√≥mo).


## Variable vs Valor

:::: {.columns}

::: {.column width="65%"}

-   **Variable:** caracter√≠stica que puede variar entre observaciones. Se ubica en columnas y tiene un tipo de dato definido. 

:::

::: {.column width="35%"}

![](images/variable.JPG){fig-align="center"}

:::
::::

. . .

::: {style="font-size: 80%;"}

-   Ej.: edad, sexo, diagn√≥stico, fecha de consulta.

:::

. . .

::: {style="font-size: 90%;"}

-   **Valor:** manifestaci√≥n concreta de la variable para una unidad de an√°lisis.
-   Ej.: edad = 45 (num√©rico); sexo = F (caracter); fecha de consulta = 2025-11-28 (fecha).

:::


## Variables

![](images/operacionalizacion.jpg){fig-align="center"}

![](images/medicion.jpg){fig-align="center"}


## Unidad de an√°lisis

:::: {.columns}

::: {.column width="60%"}

-   Entidad b√°sica sobre el que se registran los datos. Se ubica en las filas y constan de un conjunto de variables.

:::

::: {.column width="40%"}

![](images/observacion.JPG){fig-align="center"}

:::
::::

-   Ejemplos en salud: **Paciente**, **Consulta**, **Evento** (p. ej. notificaci√≥n de enfermedad), **Hospital**, etc.

**Por qu√© importa:** la elecci√≥n condiciona el dise√±o, la agregaci√≥n, la dependencia y la interpretaci√≥n.

## Tipos de variables 

::: {.fragment .fade-in-then-semi-out}

-   **Cuantitativas o num√©ricas** (Continuas: p. ej. edad, peso o discretas: p. ej. n√∫mero de consultas)

:::

::: {.fragment .fade-in-then-semi-out}

-   **Cualitativas o categ√≥ricas** (Nominales: p. ej. sexo, diagn√≥stico. u ordinales: p. ej. gravedad (leve/moderado/severo).

:::

::: {.fragment .fade-in-then-semi-out}

-   **Fechas / Tiempos** (Ej.: fecha de inicio de s√≠ntomas, fecha de notificaci√≥n).

:::

::: {.fragment .fade-in-then-semi-out}

- **L√≥gicas** (dicot√≥micas Verdadero - Falso)

:::

## Tablas ordenadas (datos tabulares)

Llamamos ‚Äúdatos ordenados‚Äù (tidy data) cuando:

. . . 

::: {style="font-size: 80%;"}

- Cada variable est√° en una columna

:::

. . . 
 
::: {style="font-size: 80%;"} 
 
- Cada observaci√≥n est√° en una fila y pertenece a una unidad de observaci√≥n.

:::

. . . 


::: {style="font-size: 80%;"}

- Cada celda del cruce entre una columna y una fila es un valor

:::

. . . 

![](images/tidy.PNG){fig-align="center"}

## Archivos planos

::: incremental

-   Archivos que contiene tablas de datos
-   Est√°n construidos con solo texto (se puede abrir desde un Block de Notas) 
-   Formato simple: cada fila = observaci√≥n, cada columna = variable.
-   Extensiones comunes: `.csv`, `.txt` (delimitado por comas, punto y coma o tabulador).

:::

. . . 

**Ventajas:** interoperables y f√°ciles de leer en R (`readr::read_csv()`).

## Tablas relacionales (bases de datos)

-   **Estructura:** varias tablas vinculadas por variables identificadoras (claves).
    -   **Clave primaria:** identifica √∫nivocamente una observaci√≥n en su propia tabla
    -   **Clave for√°nea:** identifica un√≠vocamente una observaci√≥n en otra tabla
    
. . .     
    
Ejemplo: `pacientes` (id_paciente) ‚Üî `consultas` (id_consulta, id_paciente).

**Ventaja:** evitar duplicaci√≥n y mantener consistencia en datos complejos.

## Metadatos

::: incremental

-   *"Datos sobre los datos":* describen origen, fecha, definiciones, responsable.
-   Incluyen a los diccionarios de datos (siempre deben acompa√±ar a las tablas de datos)
-   Ejemplos: fecha de actualizaci√≥n, fuente, variables derivadas, formato.

:::

. . . 

**Por qu√© son cr√≠ticos?:** permiten interpretar correctamente y mantener trazabilidad.

## Diccionario de datos 

::: {style="font-size: 80%;"} 

Delimitador de variables:   ;

Delimitador de decimales:   ,

| Variable           |       Tipo | Descripci√≥n           | Valores posibles |
|--------------------|-----------:|-----------------------|------------------|
| id_caso            |   num√©rico | Identificador √∫nico   | 1,2,3...         |
| edad               |   num√©rico | Edad en a√±os          | 0‚Äì120            |
| sexo               | categ√≥rica | Sexo biol√≥gico        | M, F, O          |
| fecha_notificacion |      fecha | Fecha de notificaci√≥n | AAAA-MM-DD       |
| diagnostico        | categ√≥rica | C√≥digo CIE10          | Formato CIE10    |

:::

## Consejos cuando trabajamos con datos

<br>

1.  Definir claramente la **unidad de an√°lisis** antes de recolectar/analizar.
2.  Mantener un **diccionario de datos** actualizado (incluyendo variables construidas).
3.  Saber el **tipo de variable** para elegir an√°lisis y gr√°fico adecuado.
4.  Guardar metadatos y versi√≥n de los archivos.

## Lenguajes/softwares - interfaz GUI vs CLI

<br>

:::: {.columns}

::: {.column width="55%"}

::: {style="font-size: 80%;"} 

**GUI (Graphical User Interface):** curva de aprendizaje inicial muy r√°pida. Luego pierde capacidad de realizar tareas nuevas.


**CLI (Command Line Interface):** curva de aprendizaje lenta inicialmente, a largo plazo las posibilidades de combinar y automatizar procesos permite una versatilidad mucho mayor y por lo tanto un mayor potencial creativo.

:::

:::

::: {.column width="45%"}

<br>

![](images/gui_vs_cli.jpg){fig-align="center"}

:::
::::



## Lenguaje R

![](images/R.png){.absolute top=0 left=900 width="110" height="80"}

<br>

::: {.fragment .fade-in-then-semi-out}

El lenguaje R es es un lenguaje de programaci√≥n interpretado, orientado a objetos, multiplataforma y open source pensado para el manejo de datos estad√≠sticos. 

:::

::: {.fragment .fade-in-then-semi-out}

Se considera la *lingua franca* de la estad√≠stica.

:::

::: {.fragment .fade-in-then-semi-out}

El objetivo es comenzar a *‚Äúdecir cosas con los datos‚Äù* como un usuario del lenguaje (inicialmente no como un programador).

:::

## RStudio

![](images/RStudio.png){.absolute top=0 left=900 width="250" height="80"}
<br>

- **RStudio** es un *entorno de desarrollo integrado* (**IDE**) para el lenguaje estad√≠stico R.

. . .

- Incluye una consola, un editor de sintaxis que apoya la ejecuci√≥n de c√≥digo, as√≠ como herramientas para el manejo de paquetes (librer√≠as), gr√°ficos y la gesti√≥n del espacio de trabajo.

. . .

- Pertenece a la empresa **Posit** pero se distribuye bajo licencia gratuita y libre.

## Descarga e instalaci√≥n

<br>

-   **R:** lenguaje base (<https://cran.r-project.org>)
-   **RStudio:** entorno integrado de desarrollo (<https://posit.co/download/rstudio>)
-   **Rtools (Windows):** necesario para compilar paquetes (<https://cran.r-project.org/bin/windows/Rtools/>)

**Orden recomendado de instalaci√≥n:** R- Rtools - RStudio

## Proyectos y scripts

<br>

-   **Proyecto (.Rproj):** carpeta de trabajo asociada; facilita organizaci√≥n y rutas relativas.

. . .

-   **Script (.R):** archivo de texto con instrucciones para ejecutar en secuencia.

## Asignaciones y comentarios

<br>

Operador principal de asignaci√≥n: `<-`

```{r, echo=TRUE}
x <- 5 # Asigna el valor 5 a x

y <- x + 3 # Suma 3 al valor de x
```

<br>

**Comentarios:** `#` indica texto a la derecha no ejecutable. Se usa para documentar el script.

```{r, echo=TRUE}
# Esto es un comentario
```


## Operaciones b√°sicas y tuber√≠as

Operados aritm√©ticos b√°sicos

```{r, echo=TRUE}
2 + 3
4 * 5
(10 - 2) / 4
```

**Tuber√≠as (`|>` o `%>%`):** permiten encadenar operaciones de forma legible.

```{r, echo=TRUE, eval=FALSE}

library(dplyr)

datos |>
  filter(sexo == "F") |>
  summarise(media_edad = mean(edad, na.rm = TRUE))
```

## Otros operadores 

::: {style="font-size: 80%;"} 

-   **Operadores relacionales:**
    - `==` igual
    - `!=` no igual
    - `>` mayor
    - `<` menor 
    - etc
-   **Operadores l√≥gicos:** 
    - `&` AND
    - `|` OR 
    - `!` NOT
    - etc

:::

## Funciones

- Las funciones encapsulan tareas repetitivas.

- Todas las funciones devuelven algo. Datos, un resultado o una acci√≥n determinada.

- La mayor√≠a necesitan de ciertos datos que se declaran dentro de la funci√≥n denominados argumentos. Algunos son obligatorios y otros opcionales.

```{r, echo=TRUE, eval=FALSE}
# Sintaxis general
funcion(argumento1, argumento2)


mean(edad, na.rm = TRUE)
```


## Valores especiales: perdidos (NA)

-   Representan datos ausentes o desconocidos. `N`ot `Available` (no disponible)

```{r, echo=TRUE}
x <- c(1, 2, NA, 4)
mean(x) ## Devuelve NA
mean(x, na.rm = TRUE) ## Ignora valores perdidos
```


üí° Siempre verificar la presencia de `NA` antes de c√°lculos o gr√°ficos.


## Paquetes (librer√≠as)

:::: {.columns}

::: {.column width="55%"}

-   Extienden las funciones de R base.
-   Se instalan una vez, se cargan cada vez que se usan.

```{r, echo=TRUE, eval=FALSE}
# Instalar paquete
install.packages("tidyverse")

# Activar paquete
library(tidyverse)
```

:::

::: {.column width="45%"}

![](images/paquetes.PNG){fig-align="center"}

:::
::::
üí° tidyverse agrupa herramientas clave: `dplyr`, `ggplot2`, `readr`, `tidyr`, `forcats`.

## tidyverse

![](images/hex-tidyverse.png){.absolute top=0 left=900 width="110" height="110"}

::: {.fragment .fade-in-then-semi-out}

- Estructura ordenada de datos (tidy data)

:::

::: {.fragment .fade-in-then-semi-out}

- Reutiliza las estructuras de datos mediante el uso de tuber√≠as

:::

::: {.fragment .fade-in-then-semi-out}

- Resuelve problemas complejos combinando varias piezas sencillas

:::

::: {.fragment .fade-in-then-semi-out}

- Dise√±ada para humanos incorporando una gram√°tica espec√≠fica al lenguaje (que ya posee una sintaxis estricta y una semantica que le otorga significado)

:::

## Estructuras de datos principales

<br>

::: {style="font-size: 80%;"} 

| Estructura | Descripci√≥n | Ejemplo |
|-------------------------|---------------------------|--------------------|
| **Vector** | Conjunto de valores del mismo tipo | `c(1,2,3)` |
| **Data frame** | Tabla con columnas (variables) y filas (observaciones) | `data.frame(edad, sexo)` |

**Otras estructuras:** listas, arrays, matrices, etc.

:::

## Vectores

- Son secuencias de elementos del mismo tipo de dato.

- Tienen dos atributos principales: longitud y tipo de dato.

```{r, echo=TRUE}
# Crear vector num√©rico
edades <- c(34, 45, 29, 51)


# Acceder a elementos
edades[2] # segundo valor


# Operaciones
mean(edades)
```


## Data frames

Un dataframe (marco de datos), es similar a una tabla de datos construida por una colecci√≥n de vectores ubicados verticalmente que mantienen la integridad de sus filas

```{r, echo=TRUE, eval=FALSE}
pacientes <- data.frame(
id = 1:3,
sexo = c("F", "M", "F"),
edad = c(30, 45, 50)
)

```

```{r}
pacientes <- data.frame(
id = 1:3,
sexo = c("F", "M", "F"),
edad = c(30, 45, 50)
)

pacientes
```

## Ayuda

- Todas las funciones del R base o de los paquetes vienen acompa√±adas con su respectiva documentaci√≥n.

- Esta documentaci√≥n se puede visualizar en el panel Help de RStudio navegando como si fuese un navegador web.

- La documentaci√≥n tiene una estructura que se repite: descripci√≥n, uso, argumentos, detalles, valores, ejemplos.

- Tambi√©n se pueden hacer b√∫squedas en Google, foros especializados, como por ejemplo Stack Overflow o Rpubs, canales de slack y m√°s recientemente en IAs como chatGPT o Google Gemini.


## Bibliograf√≠a 

<br>

[R para la Ciencia de Datos (2e)](https://davidrsch.github.io/r4ds-es/)

[Fundamentos de ciencia de datos con R](https://cdr-book.github.io/index.html)

[EpiRhandbook](https://epirhandbook.com/es/index.es.html)

[Data Visualization](https://socviz.co/)

[Big Book of R](https://www.bigbookofr.com/)
